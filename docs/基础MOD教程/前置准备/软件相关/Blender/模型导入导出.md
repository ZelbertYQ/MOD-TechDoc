# 模型导入导出

## 概述

在MOD制作过程中，经常需要在Blender和游戏之间导入导出模型文件。本文档介绍常用的模型格式和导入导出流程。

## 支持的文件格式

### 常用导入格式
- **FBX** - 最常用的3D模型交换格式
- **OBJ** - 简单的几何体格式
- **DAE (Collada)** - 开放标准的3D格式
- **3DS** - 3ds Max原生格式
- **PLY** - 点云和网格格式

### 常用导出格式
- **FBX** - 推荐用于游戏模型
- **OBJ** - 适用于静态模型
- **GLTF/GLB** - 现代Web和游戏标准
- **STL** - 3D打印格式

## 导入流程

### FBX文件导入

1. **准备工作**
   - 确保已启用FBX插件
   - 检查文件路径中无中文字符

2. **导入步骤**
   ```
   File → Import → FBX (.fbx)
   ```

3. **导入设置**
   - **Scale**: 根据需要调整缩放比例
   - **Forward/Up Axis**: 设置正确的坐标轴方向
   - **Import Normals**: 导入法线信息
   - **Import Materials**: 导入材质信息

### OBJ文件导入

1. **导入步骤**
   ```
   File → Import → Wavefront (.obj)
   ```

2. **注意事项**
   - OBJ文件通常包含.obj、.mtl、.png等多个文件
   - 确保所有相关文件在同一目录下

## 导出流程

### FBX文件导出

1. **选择对象**
   - 选择需要导出的模型
   - 可以选择多个对象一起导出

2. **导出步骤**
   ```
   File → Export → FBX (.fbx)
   ```

3. **导出设置**
   ```
   Include:
   ☑ Selected Objects (仅导出选中对象)
   ☑ Custom Properties (自定义属性)
   ☑ Apply Modifiers (应用修改器)
   
   Transform:
   ☑ Apply Scalings (应用缩放)
   ☑ Forward: -Z Forward
   ☑ Up: Y Up
   
   Geometry:
   ☑ Mesh (网格)
   ☑ Smoothing: Normals Only
   ☑ Export Subdivision Surface (导出细分曲面)
   
   Armature:
   ☑ Only Deform Bones (仅变形骨骼)
   ```

### OBJ文件导出

1. **导出步骤**
   ```
   File → Export → Wavefront (.obj)
   ```

2. **导出设置**
   ```
   Include:
   ☑ Selection Only (仅选中对象)
   ☑ Apply Modifiers (应用修改器)
   ☑ Write Materials (写入材质)
   ☑ Include UVs (包含UV)
   ☑ Write Normals (写入法线)
   ```

## 常见问题与解决方案

### 导入问题

**问题1: 模型尺寸不正确**
- 解决方案: 调整导入时的Scale设置
- 或在导入后使用S键缩放

**问题2: 材质丢失**
- 解决方案: 确保材质文件(.mtl)和贴图文件在正确位置
- 检查文件路径中是否有特殊字符

**问题3: 法线方向错误**
- 解决方案: 在编辑模式下选择所有面，按Alt+N → Recalculate Outside

### 导出问题

**问题1: 文件过大**
- 解决方案: 
  - 减少模型面数
  - 降低贴图分辨率
  - 移除不必要的细节

**问题2: 动画丢失**
- 解决方案: 确保导出设置中包含动画选项
- 检查关键帧是否正确设置

**问题3: UV坐标错误**
- 解决方案: 在导出前检查UV映射
- 确保UV坐标在0-1范围内

## 最佳实践

### 导入前准备
1. **备份原文件** - 始终保留原始文件副本
2. **检查文件完整性** - 确保所有相关文件都存在
3. **了解来源格式** - 了解模型的原始制作软件和版本

### 导出前检查
1. **模型检查**
   - 检查是否有重复顶点
   - 确认法线方向正确
   - 验证UV映射完整

2. **材质检查**
   - 确保所有材质都已分配
   - 检查贴图路径是否正确
   - 验证材质节点连接

3. **性能优化**
   - 合并不必要的材质
   - 优化模型拓扑结构
   - 检查面数是否合理

### 文件管理
1. **命名规范** - 使用清晰的文件命名
2. **目录结构** - 保持整洁的文件夹结构
3. **版本控制** - 为重要文件保留多个版本
